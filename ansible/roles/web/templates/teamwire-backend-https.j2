# Enable SSL session caching for improved performance
# http://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_session_cache
ssl_session_cache shared:ssl_session_cache:10m;

# HTTPS server
#
server {
	listen 443 default_server;
	listen [::]:443 default_server ipv6only=on;

	ssl on;
	ssl_certificate /etc/ssl/private/teamwire-backend.crt;
	ssl_certificate_key /etc/ssl/private/teamwire-backend.key;
	ssl_dhparam /etc/ssl/private/dhparams.pem;

	ssl_session_timeout 5m;

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	ssl_ciphers "HIGH:!aNULL:!eNULL:!MEDIUM:!LOW:!3DES:!MD5:!EXP:!PSK:!SRP:!DSS:!RC4:!SEED";
	ssl_prefer_server_ciphers on;

	{% include 'teamwire-backend-common.j2' with context %}
}
